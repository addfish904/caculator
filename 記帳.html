<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profit Caculator</title>
    <link rel="stylesheet" href="calculator.css">
</head>
<body style="background-color: #E4EFF9;">
    <div class="Banner">
        <img src="bubble.png" class="bubble_1" style="right: 80px;" alt="">
        <img src="bubble2.png" class="bubble_2" style="left: 100px; top: 80px;" alt="">
        <img src="bubble3.png" class="bubble_3" style="left: 200px; top: 300px;" alt="">
        <div class="Banner-text">
            <h1>記帳計算機</h1>
            <h2>管好我的錢，從紀錄花費開始。</h2>
            <div class="start">
                <button id="move" class="cacuLate"><a href="#enter">開始計算 ↓</a></button>
            </div>
        </div>
    </div>
    
    <div class="data pd" id="enter">填入資料</div>
    <div class="container">
        <div class="box">
            <div>
                <div class="mb-8">
                    消費時間 
                </div>
                <input id="buytime" type="date" class="button-time">
            </div>
            <div class="pl-85">
                <div class="mb-8">
                    收入時間
                </div>
                <input id="selltime" type="date" class="button-time" >
            </div>
            <br>
        </div>
        <div class="box mb-126">
            <div>
                <div class="mb-8">
                    花費
                </div>
                <input id="cost" type="text" class="button-time" >
            </div>
            <div class="pl-85">
                <div class="mb-8">
                    收入
                </div>
                <input id="price" type="text" class="button-time" >
            </div>
            <div class="pl-85">
                <div class="mb-8">
                    品項
                </div>
                <input id="number" type="text" class="button-time" >
            </div> 
        </div>
        <div class="m-center">
            <button onclick="execute()" class="button-send">送出</button>
        </div>
    </div>
    <div class="data pd">計算結果</div>

    <div class="">
        <table id="myTable" class="table">
            <thead class="table-title border-cir">
                <tr>
                    <th class="pt-5">消費時間</th>
                    <th class="pt-5">收入時間</th>
                    <th class="pt-5">消費</th>
                    <th class="pt-5">收入</th>
                    <th class="pt-5">品項</th>
                </tr>
            </thead>
            <tbody id="tbody" class="table-content"></tbody>
        </table>
    </div>
    <div class="white"></div>
    <div class="container mb-50">
        <div class="flex-profit">
            <div class="box box-column">
                <div class="text-left">
                    總共損益：
                </div>
                <div id="count" class="text-right">0</div>
            </div>
            <div class="box box-column">
                <div class="text-left">
                    本次損益：
                </div>
                <div id="one" class="tag text-right">0</div>
            </div>
        </div>
    </div>
    <script>
        let nameElement = document.getElementById('buytime');

        function execute(){

            let nameElementB = document.getElementById('buytime');
            let buytime = nameElementB.value;

            let nameElementS = document.getElementById('selltime');
            let selltime = nameElementS.value;

            let nameElementC = document.getElementById('cost');
            let cost = nameElementC.value*1;

            let nameElementP = document.getElementById('price');
            let price = nameElementP.value*1;

            let nameElementN = document.getElementById('number');
            let number = nameElementN.value;

            let tbody = document.querySelector('#tbody');
            let datas=[{
                selltime : buytime,
                buytiime : selltime,
                cost : cost,
                price : price,
                number : number,
            }];
            console.log(datas);
            for (var i = 0; i <= 0; i++) { // 外面的for回圈管行 tr
                // 1. 創建 tr行
                var tr = document.createElement('tr');
                tbody.appendChild(tr);
                // 2. 行里面創建單元格(跟資料有關系的3個單元格) td 單元格的數量取決于每個物件里面的屬性個數  for回圈遍歷物件 datas[i]
                for (var k in datas[i]) { // 里面的for回圈管列 td
                    // 創建單元格 
                    var td = document.createElement('td');
                    // 把物件里面的屬性值 datas[i][k] 給 td  
                    // console.log(datas[i][k]);
                    td.innerHTML = datas[i][k];
                    tr.appendChild(td);
                };
            };
            document.getElementById("one").innerHTML = datas[0].cost - datas[0].price;
            let one1=document.querySelector("#one");
            let count1=document.querySelector("#count");
            if(one.innerHTML>0){
                one1.style.color="red";
            }else if(one.innerHTML<0){
                one1.style.color="green";
            };
            let x=parseInt(one1.innerHTML);
            let total=parseInt(document.getElementById("count").innerHTML);
            count.innerHTML=total+x;
            if(count.innerHTML>0){
                count1.style.color="red";
            }else if(count.innerHTML<0){
                count1.style.color="green";
            };
        }; 

    </script>
</body>
</html>